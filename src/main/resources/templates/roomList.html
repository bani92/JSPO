<!doctype html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}">

<head>
    <meta charset="UTF-8">
    <title>객실 등록</title>

</head>
<body>

<div class="container h-100 " layout:fragment="content">
    <link rel="stylesheet" type="text/css" href="http://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
    <link rel="stylesheet" href="http://cdn.jsdelivr.net/npm/xeicon@2.3.3/xeicon.min.css">
    <script type="text/javascript" src="http://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <style>
        td {
            text-align: center;
        }

        .oriImg {
            width: 300px;
            height: 500px;
        }
        .roomImg {
            width: 500px;
            height: 500px;
        }


        .visual {
            position: relative;
        }

        .visual button {
            position: absolute;
            z-index: 10;
            top: 50%;
            transform: translateY(-50%);
            width: 71px;
            height: 71px;
            border-radius: 100%;
            background: rgba(0, 0, 0, .5);
            border: none;
        }

        .visual button:before {
            font-family: 'xeicon';
            color: #fff;
            font-size: 45px;
        }

        .visual button.slick-prev {
            left: 50px;
            font-size: 0;
            color: transparent;
        }

        .visual button.slick-prev:before {
            content: "\e93d";
            font-family: 'xeicon';

        }


        .visual button.slick-next {
            right: 50px;
            font-size: 0;
            color: transparent;
        }

        .visual button.slick-next:before {
            content: "\e940";
            font-family: 'xeicon';
        }


    </style>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <script>
        $(function () {
            $('input[name="daterange"]').daterangepicker({
                "locale": {
                    "format": "YYYY-MM-DD",
                    "separator": " ~ ",
                    "applyLabel": "확인",
                    "cancelLabel": "취소",
                    "fromLabel": "체크인",
                    "toLabel": "체크아웃",
                    "customRangeLabel": "Custom",
                    "weekLabel": "주",
                    "daysOfWeek": ["일", "월", "화", "수", "목", "금", "토"],
                    "monthNames": ["1월", "2월", "3월", "4월", "5월", "6월",
                        "7월", "8월", "9월", "10월", "11월", "12월"],
                    "firstDay": 1
                },
                "startDate": new Date(),
                "endDate": new Date(new Date().setDate(new Date().getDate() + 1)),
                "minDate": new Date(),
                "maxDate": new Date(new Date().setDate(new Date().getDate() + 90)),
                "opens": "center",
            }, function (start, end, label) {
                console.log('New date range selected: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD') + ' (predefined range: ' + label + ')');
                window.document.querySelector('.start').value = start.format('YYYY-MM-DD');
                window.document.querySelector('.end').value = end.format('YYYY-MM-DD');
            })
        });
    </script>
    <link rel="stylesheet" type="text/css"
          href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"/>

    <header>
        <th:block th:if="${hotelDto != null}">
            <h1 th:text="${hotelDto.htName}"/>
            <h3 th:text="${hotelDto.htAddress}"/>
            <h3 th:text="${hotelDto.htPhone}"/>
            <!--    리스트로 그림 받아오기        -->
            <section class="visual">
            <img th:src="${hotelDto.getHtImg()}" class="oriImg">
                <img th:src="${hotelDto.getHtImg()}" class="oriImg">
            </section>
            <script type="text/javascript">
                $(document).ready(function() {
                    $.noConflict();
                    $('.visual').slick();
                });
            </script>
        </th:block>
    </header>

    <table>
        <form th:action="@{/room/list/}+${hotelDto.htId}">
            <input type="text" name="daterange" th:value="${#temporals.createToday()}"/>
            <input type="text" class="start" name="checkin" th:value="${checkin}" hidden="hidden"/>
            <input type="text" class="end" name="checkout" th:value="${checkout}" hidden="hidden"/>
            <button type="submit">검색</button>
        </form>

        <tr>
            <th>사진</th>
            <th>객실이름</th>
            <th>객실가격</th>
        </tr>

        <tr th:each="list : ${list}">
            <form role="form" method="post" action="/reservation">
                <input type="text" hidden=hidden th:name="hotelHtId" th:value="${list.hotelHtId}"/>
                <td>
                    <img th:src="${list.rImg}" class="roomImg">
                </td>
                <td th:name="rName" th:text="${list.rName}"></td>
                <td th:name="rPrice" th:text="${list.rPrice}+'원'"></td>
                <td th:name="rCnt" th:text="${list.rCnt}+'명'"></td>
                <div hidden="hidden">
                    <input type="text" th:name="rId" th:value="${list.rId}"/>
                    <input type="text" class="start" th:name="rCheckin" th:value="${checkin}"/>
                    <input type="text" class="end" th:name="rCheckout" th:value="${checkout}"/>
                </div>
                <td>
                    <button type="submit">객실 예약하기</button>
                </td>
            </form>
        </tr>
    </table>
</div>
</body>
</html>